<?xml version="1.0"?>
<clickhouse>
    <!-- ClickHouse Keeper Client Configuration - SSL Fixed for v25.6.2.5 -->
    
    <!-- ZooKeeper/Keeper Client Configuration -->
    <zookeeper>
        <!-- Basic connection settings -->
        <session_timeout_ms>30000</session_timeout_ms>
        <operation_timeout_ms>10000</operation_timeout_ms>
        <root>/clickhouse</root>
        
        <!-- Keeper server nodes with SSL -->
        <node>
            <host>keeper-1</host>
            <port>2181</port>
            <secure>1</secure>
        </node>
        <node>
            <host>keeper-2</host>
            <port>2181</port>
            <secure>1</secure>
        </node>
        <node>
            <host>keeper-3</host>
            <port>2181</port>
            <secure>1</secure>
        </node>
    </zookeeper>

    <!-- Distributed DDL Configuration -->
    <distributed_ddl>
        <path>/clickhouse/task_queue/ddl</path>
        <profile>default</profile>
    </distributed_ddl>

    <!-- Remote Servers Configuration (1 shard, 3 replicas) -->
    <remote_servers>
        <${CLUSTER_NAME}>
            <shard>
                <replica>
                    <host>${INTERSERVER_HOST}</host>
                    <port>9002</port>
                    <user>interserver</user>
                    <secure>1</secure>
                </replica>
                <replica>
                    <host>${INTERSERVER_HOST}</host>
                    <port>9002</port>
                    <user>interserver</user>
                    <secure>1</secure>
                </replica>
                <replica>
                    <host>${INTERSERVER_HOST}</host>
                    <port>9002</port>
                    <user>interserver</user>
                    <secure>1</secure>
                </replica>
            </shard>
        </${CLUSTER_NAME}>
    </remote_servers>

    <!-- Macros for ReplicatedMergeTree tables -->
    <macros>
        <cluster>${CLUSTER_NAME}</cluster>
        <shard>01</shard>
        <replica>${INSTANCE_NAME}</replica>
    </macros>

</clickhouse>